<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>pencil.plus — Quick Assessment</title>
<meta name="description" content="Self-check your communication skills with pencil.plus free assessment.">
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="logo.png">
<meta name="theme-color" content="#4a4a4a" />

<!-- Inter font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --main:#ffb800;        /* brand primary */
    --secondary:#f84051;   /* brand secondary */
    --paper:#f5f5f7;       /* site background */
    --ink:#4a4a4a;         /* body text */
    --contentW:min(880px,92vw);
    --tabbar-h:64px;       /* bottom tab bar height */
  }

  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0; background:var(--paper); color:var(--ink);
    font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial;
    line-height:1.55;
    padding-bottom: calc(var(--tabbar-h) + 16px + env(safe-area-inset-bottom));
  }
  a{color:var(--secondary); text-decoration:none}
  a:hover{text-decoration:underline}
  .container{width:var(--contentW); margin:0 auto; padding-inline:24px}

  /* Header (simple, opaque #4a4a4a) */
  header{
    position:sticky; top:0; z-index:1000; background:#4a4a4a;
    border-bottom:1px solid rgba(255,255,255,.08);
    padding: calc(8px + env(safe-area-inset-top)) 0 8px;
  }
  .hdr-inner{width:var(--contentW); margin:0 auto; padding-inline:16px; display:flex; justify-content:center; align-items:center;}
  .hdr-banner{ display:block; max-height:150px; width:auto; object-fit:contain; filter:none }

  main{padding:28px 0}
  h1{color:#232323; text-align:center; font-weight:800; letter-spacing:.2px}

  /* Form container styled to brand */
  form{
    background:#fff;
    border:2px solid var(--main);
    border-radius:20px;
    padding:24px;
    box-shadow:0 6px 18px rgba(0,0,0,.04);
  }

  /* Fieldset/legend semantics for accessibility */
  fieldset{border:0; padding:0; margin:0 0 22px}
  legend{font-weight:700; margin-bottom:10px; color:#232323}
  label{display:block; margin-bottom:8px}
  input[type="radio"]{ transform: translateY(1px); }

  /* Buttons to secondary */
  button{
    background:var(--secondary); color:#fff; border:none; padding:12px 18px; border-radius:12px;
    font-weight:800; cursor:pointer; transition: transform .12s ease, background .2s ease;
  }
  button:hover{ background:#ff5a67; transform: translateY(-1px) }
  button:active{ transform: scale(.98) }

  /* Result styles tuned to palette */
  .result{margin-top:24px; padding:16px; border-radius:14px; font-weight:700}
  .low{background:#ffe6ea; color:#a31225; border:1px solid #ffd0d6}
  .mid{background:#fff5da; color:#7a5a00; border:1px solid #ffe7ac}
  .high{background:#fff6cf; color:#6b4e00; border:1px solid #ffe08a}

  footer{padding:28px 0; text-align:center; color:#6a6a6a}

  /* CTA links inside result box */
  .result a{
    color: var(--secondary);
    font-weight: 700;
    text-decoration: none;
    padding: 4px 6px;
    border-radius: 6px;
    transition: background .2s ease, color .2s ease;
  }
  .result a:hover{
    color:#fff;
    background: var(--secondary);
    text-decoration:none;
  }

  /* ---- Details form layout (clean two-column) ---- */
  .form-grid{
    display:grid;
    grid-template-columns: 180px 1fr;
    gap:14px 18px;
    align-items:center;
  }
  .form-grid .full-row{ grid-column: 1 / -1; }

  .form-grid input[type="text"],
  .form-grid input[type="email"],
  .form-grid input[type="tel"]{
    width:100%;
    padding:12px 14px;
    border:1.5px solid #ddd;
    border-radius:10px;
    font:inherit;
    line-height:1.3;
    background:#fff;
  }
  .form-grid input[type="text"]:focus,
  .form-grid input[type="email"]:focus,
  .form-grid input[type="tel"]:focus{
    outline:none;
    border-color: var(--secondary);
    box-shadow: 0 0 0 3px rgba(248,64,81,.15);
  }

  .form-grid label{
    margin:0;
    font-weight:600;
    color:#2a2a2a;
  }

  .form-grid .consent{
    display:flex; align-items:flex-start; gap:10px;
    font-weight:500; color:#444;
  }

  @media (max-width: 560px){
    .form-grid{ grid-template-columns: 1fr; }
    .form-grid label{ margin-bottom:4px; }
  }

  /* =========================== Bottom Tab Bar =========================== */
  .tabbar{
    position:fixed; left:0; right:0; bottom:0; z-index:1200;
    height: calc(var(--tabbar-h) + env(safe-area-inset-bottom));
    padding-bottom: env(safe-area-inset-bottom);
    background: rgba(74,74,74,.35);
    border-top:1px solid rgba(255,255,255,.52);
    backdrop-filter: blur(20px) saturate(170%);
    -webkit-backdrop-filter: blur(20px) saturate(170%);
  }
  .tabbar-inner{
    height:var(--tabbar-h);
    max-width: min(680px, 96vw);
    margin:0 auto;
    display:grid; grid-template-columns:repeat(4,1fr); gap:10px;
    align-items:center; padding:8px 14px;
  }
  .tab{
    display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
    padding:8px 6px; border-radius:14px; text-decoration:none; color:#222;
    background: var(--main);
    font-weight:800; letter-spacing:.15px;
    border:1px solid rgba(0,0,0,.05);
    transition: transform .12s ease, background .2s ease, color .2s ease, box-shadow .2s ease;
  }
  .tab:hover, .tab:focus-visible{
    background:var(--secondary); color:#fff; outline:none; box-shadow:0 8px 18px rgba(0,0,0,.12);
  }
  .tab:active{ transform: scale(.97) }
  .tab[aria-current="page"], .tab[aria-current="true"]{
    outline:3px solid rgba(255,184,0,.25);
  }
  .tab svg{ width:20px; height:20px; flex:0 0 auto }

  @media (min-width: 920px){
    .tabbar-inner{ max-width: 820px; }
  }
</style>
</head>
<body>

<header>
  <div class="hdr-inner">
    <!-- Banner links back home (skip intro on index) -->
    <a href="index.html?skipIntro=1#home" aria-label="Back to Home">
      <img src="header.png" alt="pencil.plus — People. Purpose. Practice. Progress." class="hdr-banner">
    </a>
  </div>
</header>

<main>
  <div class="container" id="top">
    <h1>Quick Assessment: Communication Skills Check</h1>
    <p style="text-align:center; margin-bottom:20px;">Choose the answer that feels most like you. Each option reflects a valid approach — some are more effective in advanced communication.</p>

    <!-- ===== FORM: submits to Formspree, stays on page, includes contact + hidden fields ===== -->
    <form id="quizForm" action="https://formspree.io/f/xjkoqwky" method="POST" novalidate>

      <!-- ===== QUIZ QUESTIONS ===== -->
      <fieldset>
        <legend>1. When explaining an idea to classmates or colleagues, you usually…</legend>
        <label><input type="radio" name="q1" value="1" required> A. Share the main points in a clear and concise way.</label>
        <label><input type="radio" name="q1" value="2"> B. Provide a detailed explanation with examples to support your points.</label>
        <label><input type="radio" name="q1" value="3"> C. Shape your explanation to fit the audience’s background and context.</label>
      </fieldset>

      <fieldset>
        <legend>2. In group discussions, how do you usually respond to different opinions?</legend>
        <label><input type="radio" name="q2" value="1" required> A. Restate your perspective clearly so it is well understood.</label>
        <label><input type="radio" name="q2" value="2"> B. Acknowledge the other viewpoint and connect it with your own ideas.</label>
        <label><input type="radio" name="q2" value="3"> C. Explore perspectives, highlight shared ground, and invite input.</label>
      </fieldset>

      <fieldset>
        <legend>3. When giving feedback on someone’s work…</legend>
        <label><input type="radio" name="q3" value="1" required> A. Share observations directly so improvements can be made quickly.</label>
        <label><input type="radio" name="q3" value="2"> B. Point out strengths and offer suggestions for adjustment.</label>
        <label><input type="radio" name="q3" value="3"> C. Recognize strengths, suggest improvements, and ask about their goals.</label>
      </fieldset>

      <fieldset>
        <legend>4. During a team project, how do you usually handle task updates?</legend>
        <label><input type="radio" name="q4" value="1" required> A. Provide updates when your part is completed.</label>
        <label><input type="radio" name="q4" value="2"> B. Share progress updates whenever you make key steps forward.</label>
        <label><input type="radio" name="q4" value="3"> C. Communicate updates regularly to keep the whole team aligned.</label>
      </fieldset>

      <fieldset>
        <legend>5. In a high-pressure conversation (with a boss, teacher, or client), you usually…</legend>
        <label><input type="radio" name="q5" value="1" required> A. Speak clearly and keep your message short.</label>
        <label><input type="radio" name="q5" value="2"> B. Take a moment to gather your thoughts, then respond respectfully.</label>
        <label><input type="radio" name="q5" value="3"> C. Stay calm, listen actively, and respond with clarity and composure.</label>
      </fieldset>

      <fieldset>
        <legend>6. When you don’t understand instructions, you usually…</legend>
        <label><input type="radio" name="q6" value="1" required> A. Work with the information you have and make your best attempt.</label>
        <label><input type="radio" name="q6" value="2"> B. Ask general clarifying questions to confirm what’s expected.</label>
        <label><input type="radio" name="q6" value="3"> C. Ask specific clarifying questions early to ensure alignment.</label>
      </fieldset>

      <fieldset>
        <legend>7. In an online meeting or class, your communication style is…</legend>
        <label><input type="radio" name="q7" value="1" required> A. Follow along attentively while staying in the background.</label>
        <label><input type="radio" name="q7" value="2"> B. Join in with comments or reactions when opportunities arise.</label>
        <label><input type="radio" name="q7" value="3"> C. Engage actively by asking questions and signaling attention.</label>
      </fieldset>

      <fieldset>
        <legend>8. When conflict arises in a group project…</legend>
        <label><input type="radio" name="q8" value="1" required> A. Focus on completing your part so progress continues.</label>
        <label><input type="radio" name="q8" value="2"> B. Talk with individuals involved to better understand the issue.</label>
        <label><input type="radio" name="q8" value="3"> C. Facilitate a respectful group discussion to find solutions.</label>
      </fieldset>

      <fieldset>
        <legend>9. To make sure people understand your message, you usually…</legend>
        <label><input type="radio" name="q9" value="1" required> A. Repeat your main points to reinforce the message.</label>
        <label><input type="radio" name="q9" value="2"> B. Rephrase your point in clearer language if needed.</label>
        <label><input type="radio" name="q9" value="3"> C. Use examples, visuals, or analogies to connect better.</label>
      </fieldset>

      <fieldset>
        <legend>10. In cross-professional teamwork, you usually…</legend>
        <label><input type="radio" name="q10" value="1" required> A. Contribute your expertise confidently.</label>
        <label><input type="radio" name="q10" value="2"> B. Share your input while respecting the different roles of others.</label>
        <label><input type="radio" name="q10" value="3"> C. Adapt your language, listen across perspectives, and bridge understanding.</label>
      </fieldset>

      <!-- ===== CLEAN, ALIGNED DETAILS SECTION ===== -->
      <fieldset>
        <legend>Your details</legend>
        <div class="form-grid">
          <label for="name">Full name</label>
          <input id="name" type="text" name="name" required autocomplete="name" />

          <label for="email">Email</label>
          <input id="email" type="email" name="email" required autocomplete="email" />

          <label for="phone">Phone (optional)</label>
          <input id="phone" type="tel" name="phone" autocomplete="tel" />

          <div class="full-row consent">
            <input id="consent" type="checkbox" name="consent" value="yes" required />
            <label for="consent" style="font-weight:500; margin:0;">
              I agree to be contacted about pencil.plus resources and understand my responses will be stored.
            </label>
          </div>
        </div>
      </fieldset>

      <!-- ===== HIDDEN META FIELDS (filled by JS before submit) ===== -->
      <input type="hidden" name="quiz_score" id="quiz_score" />
      <input type="hidden" name="quiz_band" id="quiz_band" />
      <input type="hidden" name="quiz_answers_json" id="quiz_answers_json" />
      <input type="hidden" name="page_url" id="page_url" />
      <input type="hidden" name="user_agent" id="user_agent" />
      <input type="hidden" name="time_to_submit_ms" id="time_to_submit_ms" />
      <input type="hidden" name="_subject" value="pencil.plus Assessment Submission" />

      <!-- Honeypot (spam trap) -->
      <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;" />

      <button type="submit">Submit</button>
    </form>

    <div id="resultBox" class="result" style="display:none" aria-live="polite"></div>
    <div id="submitStatus" class="result" style="display:none; margin-top:12px;" aria-live="polite"></div>
  </div>
</main>

<footer>
  <div class="container">© 2025 pencil.plus — Free, open-access communication training.</div>
</footer>

<!-- Bottom Tab Bar (replaces old dock) -->
<nav class="tabbar" aria-label="Primary">
  <div class="tabbar-inner">
    <a class="tab" href="index.html?skipIntro=1#home" id="tab-home">
      <!-- home icon -->
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3.2 3.5 10a1 1 0 0 0 .7 1.8H6v7.2c0 .6.4 1 1 1h3.6v-6h2.8v6H17c.6 0 1-.4 1-1v-7.2h1.8a1 1 0 0 0 .7-1.8L12 3.2z"/></svg>
      <span>Home</span>
    </a>
    <a class="tab" href="assessment.html" id="tab-assess" aria-current="true">
      <!-- clipboard/check icon -->
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 3h6a2 2 0 0 1 2 2h2a1 1 0 0 1 1 1v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h2a2 2 0 0 1 2-2Zm0 2v1h6V5H9Zm2.9 9.9 4.6-4.6-1.4-1.4-3.2 3.2-1.6-1.6-1.4 1.4 3 3Z"/></svg>
      <span>Assessment</span>
    </a>
    <a class="tab" href="index.html?skipIntro=1#contact" id="tab-connect">
      <!-- chat icon -->
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z"/></svg>
      <span>Connect</span>
    </a>
    <a class="tab" href="index.html?skipIntro=1#more" id="tab-more">
      <!-- grid icon -->
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h8v8H3V3Zm10 0h8v8h-8V3ZM3 13h8v8H3v-8Zm10 0h8v8h-8v-8Z"/></svg>
      <span>More</span>
    </a>
  </div>
</nav>

<script>
  // Quiz logic + AJAX submit to Formspree
  (function(){
    const form = document.getElementById('quizForm');
    const resultBox = document.getElementById('resultBox');
    const submitStatus = document.getElementById('submitStatus');

    // Timing: measure time to submit
    const startTime = performance.now();

    function classify(score){
      if(score >= 26) return 'Excellent Communicator';
      if(score >= 18) return 'Growing Communicator';
      return 'Needs More Practice';
    }

    function resultMessage(band){
      if(band === 'Excellent Communicator'){
        return 'Excellent Communicator. You are already demonstrating strong skills. Explore the toolkit for advanced scenarios and cross-professional challenges (free).';
      } else if(band === 'Growing Communicator'){
        return 'Growing Communicator. You have a solid foundation. Use the toolkit’s practical handouts and guided activities to elevate your impact in teamwork and leadership (free).';
      }
      return 'Needs More Practice. You are developing important skills and every step counts. The toolkit provides simple, structured tools to build confidence in communication (free).';
    }

    function showResultBox(cls, html, withCtas){
      resultBox.style.display = 'block';
      resultBox.className = 'result ' + cls;
      resultBox.innerHTML = html + (withCtas ? `
        <div style="margin-top:12px;">
          <a href="index.html?skipIntro=1#toolkit">Explore Toolkit</a> • 
          <a href="mailto:hello@pencil.plus">Email Us</a> • 
          <a href="https://m.me/pencil.plustoolkit" target="_blank" rel="noopener">Messenger</a>
        </div>` : '');
      resultBox.scrollIntoView({behavior:'smooth', block:'center'});
    }

    function showStatus(cls, text){
      submitStatus.style.display = 'block';
      submitStatus.className = 'result ' + cls;
      submitStatus.textContent = text;
    }

    form.addEventListener('submit', async function(e){
      e.preventDefault();

      const total = 10;
      let score = 0, answered = 0;
      const answers = {};

      for(let i=1; i<=total; i++){
        const sel = document.querySelector('input[name="q'+i+'"]:checked');
        if(sel){
          answered++;
          const val = parseInt(sel.value, 10);
          score += val;
          answers['q'+i] = val;
        } else {
          answers['q'+i] = null;
        }
      }

      // Validate quiz completion first
      if(answered < total){
        showResultBox('low', 'Please answer all 10 questions before submitting.', false);
        form.reportValidity && form.reportValidity();
        return;
      }

      // Validate contact + consent via native constraints
      if(!form.checkValidity()){
        form.reportValidity && form.reportValidity();
        return;
      }

      // Compute band + populate hidden fields
      const band = classify(score);
      document.getElementById('quiz_score').value = String(score);
      document.getElementById('quiz_band').value = band;
      document.getElementById('quiz_answers_json').value = JSON.stringify(answers);
      document.getElementById('page_url').value = location.href;
      document.getElementById('user_agent').value = navigator.userAgent || '';
      document.getElementById('time_to_submit_ms').value = Math.round(performance.now() - startTime).toString();

      // Show on-page result immediately
      let cssClass = 'mid';
      if(band === 'Excellent Communicator') cssClass = 'high';
      if(band === 'Needs More Practice') cssClass = 'low';
      showResultBox(cssClass, resultMessage(band), true);

      // Send to Formspree without leaving the page
      const fd = new FormData(form);

      try{
        const resp = await fetch(form.action, {
          method: 'POST',
          body: fd,
          headers: { 'Accept': 'application/json' }
        });

        if(resp.ok){
          showStatus('high', 'Submission received. Thank you.');
          // Optional: form.reset();  // Uncomment if you prefer to clear fields after submit
        } else {
          let msg = 'Submission failed. Please try again in a moment.';
          try {
            const data = await resp.json();
            if(data && data.errors && data.errors.length){
              msg = data.errors.map(e => e.message).join(' ');
            }
          } catch(_) {}
          showStatus('low', msg);
        }
      } catch(err){
        showStatus('low', 'Network error. Please check your connection and try again.');
      }
    });
  })();
</script>
</body>
</html>
